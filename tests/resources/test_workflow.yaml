infos:
  creation_date: 2025-05-20-14:49:46
  description: No description provided
  inputs_schema:
    export_directory:
      description: Output directory path where the image will be saved
      is_input_file: false
      required: true
      task: export_image_task
    input_path_2:
      description: Path to a file, or a directory containing files (all files will
        be imported) or list of paths.
      is_input_file: true
      required: true
      task: import_image_task
    name_pattern:
      description: 'Output file name pattern. Can contain the special {image_name}
        or {file_name} tokens '
      is_input_file: false
      required: false
      task: export_image_task
  instructions: This configuration file was generated by PlantSeg and can be used
    to run a headless workflow. In order to run the workflow, you will need to customize
    this file with the correct paths and parameters. To read detailed instructions
    on how to do this, please visit the PlantSeg documentation (https://kreshuklab.github.io/plant-seg/).
  version: 2.0.0b4
inputs:
- export_directory: /tmp
  input_path_2: /home/kriedmiller/projects/plant-seg/tests/resources/sample_ovule.h5
  name_pattern: '{file_name}_export'
list_tasks:
- func: import_image_task
  id: f0e7ee0b-c7c2-4010-b01c-3756ad8402ba
  images_inputs:
    input_path: input_path_2
  node_type: root
  outputs:
  - sample_ovule_raw_b6c39182-6dda-413f-8db6-7fb6a1e36a23
  parameters:
    image_name: sample_ovule_raw
    key: /raw
    m_slicing: null
    semantic_type: raw
    stack_layout: ZYX
  skip: false
- func: set_voxel_size_task
  id: 47e12684-1e53-4dd9-99e3-005541aa17d2
  images_inputs:
    image: sample_ovule_raw_b6c39182-6dda-413f-8db6-7fb6a1e36a23
  node_type: node
  outputs:
  - sample_ovule_raw_set_voxel_size_c9d33a89-ff7e-440e-9099-62b718845771
  parameters:
    voxel_size:
    - 0.3
    - 0.2
    - 0.2
  skip: false
- func: gaussian_smoothing_task
  id: f26a0aee-c98f-4156-8733-298e2fb50011
  images_inputs:
    image: sample_ovule_raw_set_voxel_size_c9d33a89-ff7e-440e-9099-62b718845771
  node_type: node
  outputs:
  - sample_ovule_raw_set_voxel_size_smoothed_535ed9e5-3ee2-4f74-9881-856850174cc5
  parameters:
    sigma: 0.598249
  skip: false
- func: image_rescale_to_voxel_size_task
  id: c7e922b0-f0bc-4eaf-a59c-0e40c6a9dc5d
  images_inputs:
    image: sample_ovule_raw_set_voxel_size_smoothed_535ed9e5-3ee2-4f74-9881-856850174cc5
  node_type: node
  outputs:
  - sample_ovule_raw_set_voxel_size_smoothed_rescaled_1297c6cd-c2b7-4893-92b1-b34aaffc2c18
  parameters:
    new_unit: um
    new_voxels_size:
    - 0.15
    - 0.1
    - 0.1
    order: 0
  skip: false
- func: unet_prediction_task
  id: 17e9c5d8-1053-4308-8037-83027d96b31a
  images_inputs:
    image: sample_ovule_raw_set_voxel_size_smoothed_rescaled_1297c6cd-c2b7-4893-92b1-b34aaffc2c18
  node_type: node
  outputs:
  - sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_69833389-82b1-43d2-a01c-5a0bacd02d41
  parameters:
    _tracker:
      progress: 1600
      total: 1600
    config_path: null
    device: cuda:0
    disable_tqdm: false
    model_id: null
    model_name: confocal_2D_unet_ovules_ds2x
    model_update: false
    model_weights_path: null
    patch:
    - 1
    - 64
    - 64
    patch_halo:
    - 0
    - 22
    - 22
    single_batch_mode: true
    suffix: confocal_2D_unet_ovules_ds2x
  skip: false
- func: dt_watershed_task
  id: f6869bb1-4422-42d6-9901-f91eb4247d20
  images_inputs:
    image: sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_69833389-82b1-43d2-a01c-5a0bacd02d41
  node_type: node
  outputs:
  - sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_dt_watershed_e9201170-aad1-4d3a-9cf1-38f185d56d76
  parameters:
    alpha: 1.0
    apply_nonmax_suppression: false
    is_nuclei_image: false
    min_size: 100
    n_threads: null
    pixel_pitch: null
    sigma_seeds: 0.2
    sigma_weights: 2.0
    stacked: true
    threshold: 0.5
  skip: false
- func: clustering_segmentation_task
  id: 94a5081d-e359-4e6e-a343-5c9547b80941
  images_inputs:
    image: sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_69833389-82b1-43d2-a01c-5a0bacd02d41
    over_segmentation: sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_dt_watershed_e9201170-aad1-4d3a-9cf1-38f185d56d76
  node_type: node
  outputs:
  - sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_gasp_c97666a9-0d4b-4a5e-a3c3-fa189b4f5bc0
  parameters:
    beta: 0.6
    mode: gasp
    post_min_size: 100
  skip: false
- func: set_biggest_instance_to_zero_task
  id: f41b82ce-01a3-4a01-abcc-40da797ac57a
  images_inputs:
    image: sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_gasp_c97666a9-0d4b-4a5e-a3c3-fa189b4f5bc0
  node_type: node
  outputs:
  - sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_gasp_bg0_398752e8-fae9-4b16-a366-40c563c2cc8a
  parameters:
    instance_could_be_zero: false
  skip: false
- func: export_image_task
  id: b79248f7-bc99-4985-b423-bcaa29b34c2e
  images_inputs:
    export_directory: export_directory
    image: sample_ovule_raw_set_voxel_size_smoothed_rescaled_confocal_2D_unet_ovules_ds2x_0_gasp_bg0_398752e8-fae9-4b16-a366-40c563c2cc8a
    name_pattern: name_pattern
  node_type: leaf
  outputs: []
  parameters:
    data_type: uint16
    export_format: h5
    key: segmentation
    scale_to_origin: true
  skip: false
